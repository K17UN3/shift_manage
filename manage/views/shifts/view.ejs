<!DOCTYPE html>
<html>
<head>
    <title>月間シフトカレンダー</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <h1><%= currentMonth.format('YYYY年MM月') %> シフトカレンダー</h1>
    <p><a href="/shifts/home">ホームに戻る</a></p>

    <h2>月間シフトカレンダー</h2>

    <div class="calendar-grid-table">
        <div class="day-header sunday">日</div>
        <div class="day-header">月</div>
        <div class="day-header">火</div>
        <div class="day-header">水</div>
        <div class="day-header">木</div>
        <div class="day-header">金</div>
        <div class="day-header saturday">土</div>

        <% 
            let date = calendarStartDay.clone();
            while (date.isSameOrBefore(calendarEndDay, 'day')) {
                const dateString = date.format('YYYY-MM-DD');
                const isCurrentMonth = date.isSame(currentMonth, 'month');
                const isToday = date.isSame(today, 'day');
                const dayOfWeek = date.day(); // 0=日, 6=土
        %>
            <a href="/shifts/day/<%= dateString %>" 
               class="view-day-cell clickable 
                        <%= isCurrentMonth ? '' : 'outside-month-view' %>
                        <%= isToday ? 'today-view' : '' %>
                        <%= (dayOfWeek === 0) ? 'sunday-view' : (dayOfWeek === 6 ? 'saturday-view' : '') %>">

                <span class="date-number-button">
                    <%= date.date() %>
                </span>

                <div class="shift-summary">
                    <% 
                        // シフトデータが渡されていれば表示するロジック
                        // if (shiftsByDay[dateString] && shiftsByDay[dateString].length > 0) { ... } else { ... }
                    %>
                    <span class="summary-text">シフト状況をここに表示...</span>
                </div>
            </a>
        <%
                date.add(1, 'day'); // 次の日へ
            }
        %>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
</body>
</html>